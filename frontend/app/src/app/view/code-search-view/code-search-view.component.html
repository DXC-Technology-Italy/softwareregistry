<div class="content" role="main">

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item">Ricerca</li>
      <li class="breadcrumb-item active" aria-current="page">Cerca in tutti i sorgenti</li>
    </ol>
  </nav>


  <form>
    <div class="form-group">
      <div class="row align-items-start custom-margin">
        <div class="col-4">
          <strong>Testo da cercare</strong>
          <input type="text" class="form-control" name="keyword" (keydown.enter)="search($event)"
                 [(ngModel)]="keyword"
                 [value]="keyword"/>
        </div>
        <div class="col-3">
          <strong>Filename in cui cercare</strong>
          <input type="text" class="form-control" name="filename"
                 [(ngModel)]="filename"
                 [value]="filename"/>
        </div>
        <div class="col-2">
          <strong>Tipologia</strong>
          <select class="form-select" name="type"
                  [(ngModel)]="type">
            <option></option>
            <option *ngFor="let type of types"
                    [value]="type">{{ type }}</option>
          </select>
        </div>
        <div class="col-2">
          <strong>Limite risultati esposti</strong>
          <input type="text" class="form-control" name="limitResult"
                 [(ngModel)]="limitResult"
                 [value]="limitResult"/>
        </div>
        <div class="col-1">
          <strong>Ricerca parola intera</strong>
          <div class="form-check form-switch align-items-center">
            <input class="form-check-input" type="checkbox" role="switch" id="wholeWord">
            <label class="form-check-label" for="wholeWord"></label>
          </div>
        </div>

      </div>
      <div class="row align-items-start custom-margin">
        <div class="col">
          <strong>Area</strong>
          <select class="form-select" name="area"
                  [(ngModel)]="area">
            <option></option>
            <option *ngFor="let area of areas"
                    [value]="area">{{ area }}</option>
          </select>
        </div>
        <div class="col">
          <strong>Repository</strong>
          <select class="form-select" name="repository"
                  [(ngModel)]="repository">
            <option></option>
            <option *ngFor="let repository of repositories"
                    [value]="repository">{{ repository }}</option>
          </select>
        </div>
        <div class="col">
          <strong>Progetto</strong>
          <select class="form-select" name="project"
                  [(ngModel)]="project">
            <option></option>
            <option *ngFor="let project of projects"
                    [value]="project">{{ project }}</option>
          </select>
        </div>
        <div class="col">
          <strong>Estensione</strong>
          <select class="form-select" name="extension"
                  [(ngModel)]="extension">
            <option></option>
            <option *ngFor="let extension of extensions"
                    [value]="extension">{{ extension }}</option>
          </select>
        </div>
      </div>
    </div>
    <div *ngIf="results.length > 0" class="col-2 custom-margin">
      Numero risultati: <span>{{rowCount}}</span>
    </div>
    <div class="custom-margin">
      <button class="btn btn-outline-primary table-buttons" style="margin-right: 10px" (click)="search($event)" type="button">Cerca</button>
      <button class="btn btn-outline-danger table-buttons" (click)="clear($event)" type="button">Azzera Filtri</button>
    </div>
    <div class="download" *ngIf="results.length > 0">
      <a [routerLink]="" (click)="download($event)" type="button">Scarica il report</a>
    </div>
    <table class="table table-bordered" id="data_table">
      <thead>
      <tr>
        <th scope = "col" [appSort]="results" data-name="area" (click)="setOrder('area')">
          Area
          <i *ngIf=" columnsOrder.get('area') == 'desc'" class="bi bi-arrow-down float-right"></i>
          <i *ngIf=" columnsOrder.get('area') == 'asc'" class="bi bi-arrow-up float-right"></i>
        </th>
        <th scope = "col" [appSort]="results" data-name="repository" (click)="setOrder('repository')">
          Repository
          <i *ngIf=" columnsOrder.get('repository') == 'desc'" class="bi bi-arrow-down float-right"></i>
          <i *ngIf=" columnsOrder.get('repository') == 'asc'" class="bi bi-arrow-up float-right"></i>
        </th>
        <th scope = "col" [appSort]="results" data-name="project" (click)="setOrder('project')">
          Progetto
          <i *ngIf=" columnsOrder.get('project') == 'desc'" class="bi bi-arrow-down float-right"></i>
          <i *ngIf=" columnsOrder.get('project') == 'asc'" class="bi bi-arrow-up float-right"></i>
        </th>
        <th scope = "col" [appSort]="results" data-name="kind" (click)="setOrder('kind')">Tipo
          <i *ngIf=" columnsOrder.get('kind') == 'desc'" class="bi bi-arrow-down float-right"></i>
          <i *ngIf=" columnsOrder.get('kind') == 'asc'" class="bi bi-arrow-up float-right"></i>
        </th>
        <th scope = "col" [appSort]="results" data-name="file" (click)="setOrder('file')">File
          <i *ngIf=" columnsOrder.get('file') == 'desc'" class="bi bi-arrow-down float-right"></i>
          <i *ngIf=" columnsOrder.get('file') == 'asc'" class="bi bi-arrow-up float-right"></i>
        </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let result of results">
        <td>{{ result.area }}</td>
        <td>{{ result.repository }}</td>
        <td>{{ result.project }}</td>
        <td>{{ result.kind }}</td>
        <td><a target="_blank" href="{{ result.url }}">{{ result.file }}</a></td>
      </tr>
      </tbody>
    </table>
  </form>
</div>
