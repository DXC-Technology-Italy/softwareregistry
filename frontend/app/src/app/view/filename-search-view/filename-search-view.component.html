<div class="content" role="main">

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item">Ricerca</li>
      <li class="breadcrumb-item active" aria-current="page">Cerca nome file in tutti i progetti</li>
    </ol>
  </nav>


  <div class="row">
    <div class="col-8">
      <div class="form-group">
        <strong>Nome file da cercare</strong>
        <input type="text" class="form-control" name="filename" (keydown.enter)="search($event)"
               [(ngModel)]="filename"
               [value]="filename"/>
      </div>
    </div>
    <div class="col-2">
      <strong>Limite risultati esposti</strong>
      <input type="text" class="form-control" name="limitResult"
             [(ngModel)]="limitResult"
             [value]="limitResult"/>
    </div>
    <div class="col-2">
      <strong>Ricerca parola intera</strong>
      <div class="form-check form-switch align-items-center">
        <input class="form-check-input" type="checkbox" role="switch" id="wholeWord">
        <label class="form-check-label" for="wholeWord"></label>
      </div>
    </div>
    <form>
      <div class="row align-items-start custom-margin">
        <div class="form-group filters col-4">
          <strong>Area</strong>
          <select class="form-select" name="area"
                  [(ngModel)]="area">
            <option></option>
            <option *ngFor="let area of areas"
                    [value]="area">{{ area }}</option>
          </select>
        </div>
        <div class="form-group filters col-4">
          <strong>Repository</strong>
          <select class="form-select" name="repository"
                  [(ngModel)]="repository">
            <option></option>
            <option *ngFor="let repository of repositories"
                    [value]="repository">{{ repository }}</option>
          </select>
        </div>
        <div class="form-group filters col-4">
          <strong>Type</strong>
          <select class="form-select" name="kind"
                  [(ngModel)]="kind">
            <option></option>
            <option *ngFor="let kind of kinds"
                    [value]="kind">{{ kind }}</option>
          </select>
        </div>
      </div>
    </form>
  </div>
  <div *ngIf="results.length > 0" class="col-2 custom-margin">
    Numero risultati: <span>{{rowCount}}</span>
  </div>
  <div class="searchTab">
    <button class="btn btn-outline-primary table-buttons" style="margin-right: 10px" (click)="search($event)"
            type="button">Cerca
    </button>
    <button class="btn btn-outline-danger table-buttons" (click)="clear($event)" type="button">Azzera Filtri</button>
  </div>


  <div class="alert alert-danger" role="alert" *ngIf="noResults">
    <b>Nessun risultato ottenuto</b>
  </div>
  <div class="download" *ngIf="results.length > 0">
    <a [routerLink]="" (click)="download($event)" type="button">Scarica il report</a>
  </div>
  <table class="table table-bordered" id="data_table">
    <thead>
    <tr>
      <th scope="col" [appSort]="results" data-name="filename" (click)="setOrder('filename')">File
        <i *ngIf=" columnsOrder.get('filename') == 'desc'" class="bi bi-arrow-down float-right"></i>
        <i *ngIf=" columnsOrder.get('filename') == 'asc'" class="bi bi-arrow-up float-right"></i>
      </th>
      <th scope="col" [appSort]="results" data-name="area" (click)="setOrder('area')">
        Area
        <i *ngIf=" columnsOrder.get('area') == 'desc'" class="bi bi-arrow-down float-right"></i>
        <i *ngIf=" columnsOrder.get('area') == 'asc'" class="bi bi-arrow-up float-right"></i>
      </th>
      <th scope="col" [appSort]="results" data-name="repository" (click)="setOrder('repository')">
        Repository
        <i *ngIf=" columnsOrder.get('repository') == 'desc'" class="bi bi-arrow-down float-right"></i>
        <i *ngIf=" columnsOrder.get('repository') == 'asc'" class="bi bi-arrow-up float-right"></i>
      </th>
      <th scope="col" [appSort]="results" data-name="project" (click)="setOrder('project')">
        Progetto
        <i *ngIf=" columnsOrder.get('project') == 'desc'" class="bi bi-arrow-down float-right"></i>
        <i *ngIf=" columnsOrder.get('project') == 'asc'" class="bi bi-arrow-up float-right"></i>
      </th>
      <th scope="col" [appSort]="results" data-name="kind" (click)="setOrder('kind')">Tipo
        <i *ngIf=" columnsOrder.get('kind') == 'desc'" class="bi bi-arrow-down float-right"></i>
        <i *ngIf=" columnsOrder.get('kind') == 'asc'" class="bi bi-arrow-up float-right"></i>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let result of results">
      <td><a target="_blank" href="{{ result.url }}">{{ result.filename }}</a></td>
      <td>{{ result.area }}</td>
      <td>{{ result.repository }}</td>
      <td>{{ result.project }}</td>
      <td>{{ result.kind }}</td>
    </tr>
    </tbody>
  </table>
</div>
